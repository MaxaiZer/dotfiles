steps:
  - id: install-amneziavpn-arch
    os: "%arch"
    packages: ["amneziavpn-bin"]
    package_source: aur

  - id: amneziavpn-fix-arch #https://github.com/amnezia-vpn/amnezia-client/issues/792#issuecomment-2508097498
    os: "%arch"
    script: |
      sudo systemctl enable --now systemd-resolved.service
      sudo ln -sf ../run/systemd/resolve/stub-resolv.conf /etc/resolv.conf

  - id: install-pipewire-effects
    os: "linux"
    packages: ["easyeffects", "lsp-plugins"]
    script: |
      sudo find /usr/share/applications -maxdepth 1 -type f -name 'in.lsp_plug*.desktop' -delete && sudo update-desktop-database

  - id: install-snapper
    os: "linux"
    packages: ["snapper", "snap-pac", "btrfs-assistant"]
    script: sudo snapper -c root create-config /

  - id: install-cron-arch
    os: "%arch"
    packages: ["cronie"]
    script: sudo systemctl enable --now cronie.service

  - id: install-anki-non-arch
    os: "!%arch"
    packages: ["anki"]

  - id: install-anki-arch
    os: "%arch"
    packages: ["anki-bin"]
    package_source: aur

  - id: install-obsidian
    packages: ["obsidian"]

  - id: install-messaging-apps
    packages: ["telegram-desktop", "discord"]

  - id: install-browser
    packages: ["vivaldi"]

  - id: install-torrent
    packages: ["qbittorrent"]

  - id: install-qdirstat-arch
    os: "%arch"
    packages: ["qdirstat"]
    package_source: aur
